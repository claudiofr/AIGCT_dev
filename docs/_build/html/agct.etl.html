

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>agct.etl package &mdash; AGCT 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=01f34227"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Support" href="support.html" />
    <link rel="prev" title="agct package" href="agct.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            AGCT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="agct.html">agct package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="agct.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">agct.etl package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.analyzer">agct.analyzer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.container">agct.container module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.date_util">agct.date_util module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.exporter">agct.exporter module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.file_util">agct.file_util module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.model">agct.model module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.pd_util">agct.pd_util module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.plot_util">agct.plot_util module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.plotter">agct.plotter module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.query">agct.query module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.repo_qc">agct.repo_qc module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.reporter">agct.reporter module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.repository">agct.repository module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct.util">agct.util module</a></li>
<li class="toctree-l3"><a class="reference internal" href="agct.html#module-agct">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AGCT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="agct.html">agct package</a></li>
      <li class="breadcrumb-item active">agct.etl package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/agct.etl.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="agct-etl-package">
<h1>agct.etl package<a class="headerlink" href="#agct-etl-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-agct.etl.container">
<span id="agct-etl-container-module"></span><h2>agct.etl.container module<a class="headerlink" href="#module-agct.etl.container" title="Link to this heading"></a></h2>
<p>Class to simulate a proper Dependency Injection container.
It could be reimplemented in the future if we decide to use
a proper one. The interface, however, would remain the same.</p>
<dl class="py class">
<dt class="sig sig-object py" id="agct.etl.container.VEETLContainer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">agct.etl.container.</span></span><span class="sig-name descname"><span class="pre">VEETLContainer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app_root</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/agct/etl/container.html#VEETLContainer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#agct.etl.container.VEETLContainer" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="agct.etl.container.VEETLContainer.loader">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">loader</span></span><a class="headerlink" href="#agct.etl.container.VEETLContainer.loader" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-agct.etl.repo_loader">
<span id="agct-etl-repo-loader-module"></span><h2>agct.etl.repo_loader module<a class="headerlink" href="#module-agct.etl.repo_loader" title="Link to this heading"></a></h2>
<p>Module description here</p>
<dl class="py class">
<dt class="sig sig-object py" id="agct.etl.repo_loader.RepositoryLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">agct.etl.repo_loader.</span></span><span class="sig-name descname"><span class="pre">RepositoryLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="agct.html#agct.util.Config" title="agct.util.Config"><span class="pre">Config</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">repo_context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="agct.html#agct.repository.RepoSessionContext" title="agct.repository.RepoSessionContext"><span class="pre">RepoSessionContext</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/agct/etl/repo_loader.html#RepositoryLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#agct.etl.repo_loader.RepositoryLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="agct.etl.repo_loader.RepositoryLoader.init_variant_effect_source">
<span class="sig-name descname"><span class="pre">init_variant_effect_source</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/agct/etl/repo_loader.html#RepositoryLoader.init_variant_effect_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#agct.etl.repo_loader.RepositoryLoader.init_variant_effect_source" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="agct.etl.repo_loader.RepositoryLoader.init_variant_task">
<span class="sig-name descname"><span class="pre">init_variant_task</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/agct/etl/repo_loader.html#RepositoryLoader.init_variant_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#agct.etl.repo_loader.RepositoryLoader.init_variant_task" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="agct.etl.repo_loader.RepositoryLoader.load_variant_file">
<span class="sig-name descname"><span class="pre">load_variant_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">genome_assembly</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary_label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prior_genome_assembly</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prior_prior_genome_assembly</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/agct/etl/repo_loader.html#RepositoryLoader.load_variant_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#agct.etl.repo_loader.RepositoryLoader.load_variant_file" title="Link to this definition"></a></dt>
<dd><p>Function for loading data from a data file containing data as it is
downloaded from a source data site into our platform repository data
files. The input data_file is assumed to contain one row per variant
along with the label. There will be separate column in that row for
each vep score. For each row in the input data_file we populate
the following files:</p>
<ul class="simple">
<li><p>variant.csv - We create one row.</p></li>
<li><dl class="simple">
<dt>variant_effect_label.csv - We create one row with the label and</dt><dd><p>other informational columns.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>variant_effect_score.csv - We create one row for each vep score</dt><dd><p>column. So if we have 5 vep score columns we would create 5
rows in this file.</p>
</dd>
</dl>
</li>
</ul>
<p>To update the files we call the _upsert_repository_file method.
This method first checks if the row already exists in the file.
If it doesn’t exist it adds the row. If it does exist it updates
the existing row with the new values.</p>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>genome_assembly<span class="classifier">str</span></dt><dd><p>Genome assembly, typically hg38</p>
</dd>
<dt>task<span class="classifier">str</span></dt><dd><p>task code</p>
</dd>
<dt>data_file<span class="classifier">str</span></dt><dd><p>File containing data to be loaded.</p>
</dd>
<dt>file_folder<span class="classifier">str</span></dt><dd><p>Location of data_file</p>
</dd>
<dt>data_source: str</dt><dd><p>Source of the input data_file. i.e. HOTSPOT</p>
</dd>
<dt>binary_label: int</dt><dd><p>1 or 0. This is the binary label to be assigned to all the
variants in the data_file. The assumption is that all of the
variants in the file have the same label.</p>
</dd>
<dt>prior_genome_assembly<span class="classifier">str</span></dt><dd><p>Genome assembly prior to genome_assembly that we have chromosome,
position data for. typically hg19</p>
</dd>
<dt>prior_prior_genome_assembly<span class="classifier">str</span></dt><dd><p>Genome assembly prior to prior_genome_assembly that we have,
chromsome position data for. typically hg18</p>
</dd>
</dl>
</section>
</dd></dl>

</dd></dl>

</section>
<section id="module-agct.etl">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-agct.etl" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="agct.html" class="btn btn-neutral float-left" title="agct package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="support.html" class="btn btn-neutral float-right" title="Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Claudio Fratarcangeli, Ian Lee.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>